   1              		.cpu arm7tdmi
   2              		.fpu softvfp
   3              		.eabi_attribute 20, 1
   4              		.eabi_attribute 21, 1
   5              		.eabi_attribute 23, 3
   6              		.eabi_attribute 24, 1
   7              		.eabi_attribute 25, 1
   8              		.eabi_attribute 26, 1
   9              		.eabi_attribute 30, 6
  10              		.eabi_attribute 18, 4
  11              		.file	"main.c"
  21              	.Ltext0:
  22              		.file 1 "../main.c"
 1929              		.align	2
 1930              		.global	test_timer2
 1932              	test_timer2:
 1933              	.LFB0:
   1:../main.c     **** /*********************************************************************************************
   2:../main.c     **** * Fichero:	main.c
   3:../main.c     **** * Autor:
   4:../main.c     **** * Descrip:	punto de entrada de C
   5:../main.c     **** * Version:  <P4-ARM.timer-leds>
   6:../main.c     **** *********************************************************************************************/
   7:../main.c     **** 
   8:../main.c     **** //#define EMU
   9:../main.c     **** /*--- ficheros de cabecera ---*/
  10:../main.c     **** #include "8led.h"
  11:../main.c     **** #include "button.h"
  12:../main.c     **** #include "led.h"
  13:../main.c     **** #include "timer.h"
  14:../main.c     **** #include "timer2.h"
  15:../main.c     **** #include "44blib.h"
  16:../main.c     **** #include "44b.h"
  17:../main.c     **** #include "latido.h"
  18:../main.c     **** #include "botones_antirebotes.h"
  19:../main.c     **** /*--- variables globales ---*/
  20:../main.c     **** 
  21:../main.c     **** 
  22:../main.c     **** /*--- codigo de funciones ---*/
  23:../main.c     **** 
  24:../main.c     **** void reverse_main();
  25:../main.c     **** //////////////////////////////////////////////////////////////////////
  26:../main.c     **** //	Funcion que comprueba el correcto funcionamiento del timer2
  27:../main.c     **** //	para ello realiza varias mediciones usando la funcion Delay,
  28:../main.c     **** //  comprobandose a mano que los resultados son ranozablemente aproximados
  29:../main.c     **** void test_timer2(){
 1934              		.loc 1 29 0
 1935              		.cfi_startproc
 1936              		@ Function supports interworking.
 1937              		@ args = 0, pretend = 0, frame = 48
 1938              		@ frame_needed = 1, uses_anonymous_args = 0
 1939 0000 0DC0A0E1 		mov	ip, sp
 1940              	.LCFI0:
 1941              		.cfi_def_cfa_register 12
 1942 0004 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 1943 0008 04B04CE2 		sub	fp, ip, #4
 1944              		.cfi_offset 14, -8
 1945              		.cfi_offset 13, -12
 1946              		.cfi_offset 11, -16
 1947              	.LCFI1:
 1948              		.cfi_def_cfa 11, 4
 1949 000c 30D04DE2 		sub	sp, sp, #48
  30:../main.c     **** 	unsigned int tiempos[8];	//Array para anotar tiempos del timer2
  31:../main.c     **** 	unsigned int tiempo_medido_1ms = 0;
 1950              		.loc 1 31 0
 1951 0010 0030A0E3 		mov	r3, #0
 1952 0014 10300BE5 		str	r3, [fp, #-16]
  32:../main.c     **** 	unsigned int tiempo_medido_10ms = 0;
 1953              		.loc 1 32 0
 1954 0018 0030A0E3 		mov	r3, #0
 1955 001c 14300BE5 		str	r3, [fp, #-20]
  33:../main.c     **** 	unsigned int tiempo_medido_1s = 0;
 1956              		.loc 1 33 0
 1957 0020 0030A0E3 		mov	r3, #0
 1958 0024 18300BE5 		str	r3, [fp, #-24]
  34:../main.c     **** 	unsigned int tiempo_medido_10s = 0;
 1959              		.loc 1 34 0
 1960 0028 0030A0E3 		mov	r3, #0
 1961 002c 1C300BE5 		str	r3, [fp, #-28]
  35:../main.c     **** 	timer2_empezar();
 1962              		.loc 1 35 0
 1963 0030 FEFFFFEB 		bl	timer2_empezar
  36:../main.c     **** 
  37:../main.c     **** 	tiempos[0] = timer2_leer();
 1964              		.loc 1 37 0
 1965 0034 FEFFFFEB 		bl	timer2_leer
 1966 0038 0030A0E1 		mov	r3, r0
 1967 003c 3C300BE5 		str	r3, [fp, #-60]
  38:../main.c     **** 	Delay(10); //1 ms
 1968              		.loc 1 38 0
 1969 0040 0A00A0E3 		mov	r0, #10
 1970 0044 FEFFFFEB 		bl	Delay
  39:../main.c     **** 	tiempos[1] = timer2_leer();
 1971              		.loc 1 39 0
 1972 0048 FEFFFFEB 		bl	timer2_leer
 1973 004c 0030A0E1 		mov	r3, r0
 1974 0050 38300BE5 		str	r3, [fp, #-56]
  40:../main.c     **** 	tiempo_medido_1ms = tiempos[1]-tiempos[0];
 1975              		.loc 1 40 0
 1976 0054 38201BE5 		ldr	r2, [fp, #-56]
 1977 0058 3C301BE5 		ldr	r3, [fp, #-60]
 1978 005c 023063E0 		rsb	r3, r3, r2
 1979 0060 10300BE5 		str	r3, [fp, #-16]
  41:../main.c     **** 
  42:../main.c     **** 	tiempos[2] = timer2_leer();
 1980              		.loc 1 42 0
 1981 0064 FEFFFFEB 		bl	timer2_leer
 1982 0068 0030A0E1 		mov	r3, r0
 1983 006c 34300BE5 		str	r3, [fp, #-52]
  43:../main.c     **** 	Delay(100); //10 ms
 1984              		.loc 1 43 0
 1985 0070 6400A0E3 		mov	r0, #100
 1986 0074 FEFFFFEB 		bl	Delay
  44:../main.c     **** 	tiempos[3] = timer2_leer();
 1987              		.loc 1 44 0
 1988 0078 FEFFFFEB 		bl	timer2_leer
 1989 007c 0030A0E1 		mov	r3, r0
 1990 0080 30300BE5 		str	r3, [fp, #-48]
  45:../main.c     **** 	tiempo_medido_10ms = tiempos[3]-tiempos[2];
 1991              		.loc 1 45 0
 1992 0084 30201BE5 		ldr	r2, [fp, #-48]
 1993 0088 34301BE5 		ldr	r3, [fp, #-52]
 1994 008c 023063E0 		rsb	r3, r3, r2
 1995 0090 14300BE5 		str	r3, [fp, #-20]
  46:../main.c     **** 
  47:../main.c     **** 	tiempos[4] = timer2_leer();
 1996              		.loc 1 47 0
 1997 0094 FEFFFFEB 		bl	timer2_leer
 1998 0098 0030A0E1 		mov	r3, r0
 1999 009c 2C300BE5 		str	r3, [fp, #-44]
  48:../main.c     **** 	Delay(10000); //1 s
 2000              		.loc 1 48 0
 2001 00a0 58009FE5 		ldr	r0, .L2
 2002 00a4 FEFFFFEB 		bl	Delay
  49:../main.c     **** 	tiempos[5] = timer2_leer();
 2003              		.loc 1 49 0
 2004 00a8 FEFFFFEB 		bl	timer2_leer
 2005 00ac 0030A0E1 		mov	r3, r0
 2006 00b0 28300BE5 		str	r3, [fp, #-40]
  50:../main.c     **** 	tiempo_medido_1s = tiempos[5]-tiempos[4];
 2007              		.loc 1 50 0
 2008 00b4 28201BE5 		ldr	r2, [fp, #-40]
 2009 00b8 2C301BE5 		ldr	r3, [fp, #-44]
 2010 00bc 023063E0 		rsb	r3, r3, r2
 2011 00c0 18300BE5 		str	r3, [fp, #-24]
  51:../main.c     **** 
  52:../main.c     **** 	tiempos[6] = timer2_leer();
 2012              		.loc 1 52 0
 2013 00c4 FEFFFFEB 		bl	timer2_leer
 2014 00c8 0030A0E1 		mov	r3, r0
 2015 00cc 24300BE5 		str	r3, [fp, #-36]
  53:../main.c     **** 	Delay(100000); //10 s
 2016              		.loc 1 53 0
 2017 00d0 2C009FE5 		ldr	r0, .L2+4
 2018 00d4 FEFFFFEB 		bl	Delay
  54:../main.c     **** 	tiempos[7] = timer2_leer();
 2019              		.loc 1 54 0
 2020 00d8 FEFFFFEB 		bl	timer2_leer
 2021 00dc 0030A0E1 		mov	r3, r0
 2022 00e0 20300BE5 		str	r3, [fp, #-32]
  55:../main.c     **** 	tiempo_medido_10s = tiempos[7]-tiempos[6];
 2023              		.loc 1 55 0
 2024 00e4 20201BE5 		ldr	r2, [fp, #-32]
 2025 00e8 24301BE5 		ldr	r3, [fp, #-36]
 2026 00ec 023063E0 		rsb	r3, r3, r2
 2027 00f0 1C300BE5 		str	r3, [fp, #-28]
  56:../main.c     **** }
 2028              		.loc 1 56 0
 2029 00f4 0CD04BE2 		sub	sp, fp, #12
 2030 00f8 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2031 00fc 1EFF2FE1 		bx	lr
 2032              	.L3:
 2033              		.align	2
 2034              	.L2:
 2035 0100 10270000 		.word	10000
 2036 0104 A0860100 		.word	100000
 2037              		.cfi_endproc
 2038              	.LFE0:
 2040              		.align	2
 2041              		.global	Main
 2043              	Main:
 2044              	.LFB1:
  57:../main.c     **** void Main(void)
  58:../main.c     **** {
 2045              		.loc 1 58 0
 2046              		.cfi_startproc
 2047              		@ Function supports interworking.
 2048              		@ args = 0, pretend = 0, frame = 0
 2049              		@ frame_needed = 1, uses_anonymous_args = 0
 2050 0108 0DC0A0E1 		mov	ip, sp
 2051              	.LCFI2:
 2052              		.cfi_def_cfa_register 12
 2053 010c 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2054 0110 04B04CE2 		sub	fp, ip, #4
 2055              		.cfi_offset 14, -8
 2056              		.cfi_offset 13, -12
 2057              		.cfi_offset 11, -16
 2058              	.LCFI3:
 2059              		.cfi_def_cfa 11, 4
  59:../main.c     **** 	/* Inicializa controladores */
  60:../main.c     **** 	sys_init();         // Inicializacion de la placa, interrupciones y puertos
 2060              		.loc 1 60 0
 2061 0114 FEFFFFEB 		bl	sys_init
  61:../main.c     **** 	//timer_init();	    // Inicializacion del temporizador
  62:../main.c     **** 	//button_iniciar();	// inicializamos los pulsadores. Cada vez que se pulse se verá reflejado en el
  63:../main.c     **** 	D8Led_init();       // inicializamos el 8led
 2062              		.loc 1 63 0
 2063 0118 FEFFFFEB 		bl	D8Led_init
  64:../main.c     **** 	timer2_inicializar();
 2064              		.loc 1 64 0
 2065 011c FEFFFFEB 		bl	timer2_inicializar
  65:../main.c     **** 	inicio_antirebotes();
 2066              		.loc 1 65 0
 2067 0120 FEFFFFEB 		bl	inicio_antirebotes
  66:../main.c     **** 	latido_inicializar();
 2068              		.loc 1 66 0
 2069 0124 FEFFFFEB 		bl	latido_inicializar
  67:../main.c     **** 
  68:../main.c     **** 
  69:../main.c     **** 	/* Valor inicial de los leds */
  70:../main.c     **** 	//leds_off();
  71:../main.c     **** 	//test_timer2();
  72:../main.c     **** 	//Dejamos los leds apagados
  73:../main.c     **** 	//led1_on();
  74:../main.c     **** 	//Iniciar reversi8;
  75:../main.c     **** 	//reversi8();
  76:../main.c     **** 	//button_empezar(button_callback);
  77:../main.c     **** 	//Codigo para cambiar los leds segun el timer
  78:../main.c     **** 	reversi_main();
 2070              		.loc 1 78 0
 2071 0128 10309FE5 		ldr	r3, .L5
 2072 012c 0FE0A0E1 		mov	lr, pc
 2073 0130 13FF2FE1 		bx	r3
  79:../main.c     **** }
 2074              		.loc 1 79 0
 2075 0134 0CD04BE2 		sub	sp, fp, #12
 2076 0138 00689DE8 		ldmfd	sp, {fp, sp, lr}
 2077 013c 1EFF2FE1 		bx	lr
 2078              	.L6:
 2079              		.align	2
 2080              	.L5:
 2081 0140 00000000 		.word	reversi_main
 2082              		.cfi_endproc
 2083              	.LFE1:
 2085              		.align	2
 2086              		.global	reversi_main
 2088              	reversi_main:
 2089              	.LFB2:
  80:../main.c     **** 
  81:../main.c     **** void reversi_main(){
 2090              		.loc 1 81 0
 2091              		.cfi_startproc
 2092              		@ Function supports interworking.
 2093              		@ args = 0, pretend = 0, frame = 0
 2094              		@ frame_needed = 1, uses_anonymous_args = 0
 2095 0144 0DC0A0E1 		mov	ip, sp
 2096              	.LCFI4:
 2097              		.cfi_def_cfa_register 12
 2098 0148 00D82DE9 		stmfd	sp!, {fp, ip, lr, pc}
 2099 014c 04B04CE2 		sub	fp, ip, #4
 2100              		.cfi_offset 14, -8
 2101              		.cfi_offset 13, -12
 2102              		.cfi_offset 11, -16
 2103              	.LCFI5:
 2104              		.cfi_def_cfa 11, 4
 2105              	.L8:
  82:../main.c     **** 	while(1){
  83:../main.c     **** 		//Por ahora nada
  84:../main.c     **** 	}
 2106              		.loc 1 84 0 discriminator 1
 2107 0150 FEFFFFEA 		b	.L8
 2108              		.cfi_endproc
 2109              	.LFE2:
 2111              	.Letext0:
DEFINED SYMBOLS
                            *ABS*:00000000 main.c
                            *COM*:00000004 switch_leds
                            *COM*:00000004 switch_leds_l
C:\Users\Ivo\AppData\Local\Temp\ccuCZzXh.s:1929   .text:00000000 $a
C:\Users\Ivo\AppData\Local\Temp\ccuCZzXh.s:1932   .text:00000000 test_timer2
C:\Users\Ivo\AppData\Local\Temp\ccuCZzXh.s:2035   .text:00000100 $d
C:\Users\Ivo\AppData\Local\Temp\ccuCZzXh.s:2040   .text:00000108 $a
C:\Users\Ivo\AppData\Local\Temp\ccuCZzXh.s:2043   .text:00000108 Main
C:\Users\Ivo\AppData\Local\Temp\ccuCZzXh.s:2081   .text:00000140 $d
C:\Users\Ivo\AppData\Local\Temp\ccuCZzXh.s:2088   .text:00000144 reversi_main
C:\Users\Ivo\AppData\Local\Temp\ccuCZzXh.s:2085   .text:00000144 $a
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
timer2_empezar
timer2_leer
Delay
sys_init
D8Led_init
timer2_inicializar
inicio_antirebotes
latido_inicializar
